---
layout: post
title: "傻傻分不清楚的深拷贝与浅拷贝"
date: 2019-07-15
description: ""
tag: 技术博文
---

### 傻傻分不清楚的深拷贝与浅拷贝

* 深拷贝(deepcopy)

  (1) 将被复制对象完全复制一遍作为独立的新对象个体单独存在；（新对象）

  (2) 改变原有被复制对象不会对已经复制出来的新对象产生影响； （独立）

* 赋值引用(=)

  (1) 并不会产生一个独立的对象单独存在，他只是将原有的数据块打上一个新标签;（贴标签）

  (2) 所以当其中一个标签被改变的时候，数据块就会发生变化，另一个标签也会同步改变;（同步）

* 浅复制(copy)，分两种情况进行讨论：

  (1) 当浅复制的值是不可变对象;（数值、字符串、元组）

  “赋值引用”的情况一样，对象的id值与浅复制原来的值相同。

  (2) 当浅复制的值是可变对象;（列表、字典、集合）

  * case 1：复制的 对象中**无复杂**子对象，原来值的改变并不会影响浅复制的值，同时浅复制的值改变也并不会影响原来的值。原来值的id值与浅复制原来的值不同。

  * case 2：复制的对象中**有复杂**子对象 （e.g. 列表嵌套列表），若不改变其中复杂子对象，浅复制的值改变并不会影响原来的值。 但是改变原来的值 中的复杂子对象的值会影响浅复制的值。

  对于子对象，python将其当作一个**公共镜像**存储起来，所有对他的复制都被当成一个引用，因此当其中一个引用将镜像改变了之后另一个引用使用镜像的时候镜像已经被改变了。下面附上图示说明：
  
  ![copy](/images/posts/markdown/copy.jpg)

![deepcopy](/images/posts/markdown/deepcopy.jpg)
