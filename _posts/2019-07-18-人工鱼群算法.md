---
layout: post
title: "人工鱼群算法"
date: 2019-07-18
description: ""
tag: 技术博文
---

### 人工鱼群算法（AFSA）

#### 1.背景及原理

（1）李晓磊等人于2002年在动物群体智能行为研究的基础上提出的一种优化算法；

（2）认为水中鱼生存数目最多的地方为本水域中富含营养物质最多的地方，以此来模拟鱼群的觅食行为；

（3）主要利用鱼的三大基本行为：觅食、聚群和追尾行为；

（4）人工鱼对外的感知是依靠视觉来实现的，而人工鱼群通过模型来模拟这种视觉；

（5）采用自上而下的寻优模式，通过鱼群中各个体的局部寻优，达到全局最优值。

####2.数学建模

（1）模拟鱼群视觉
$$
X_{v}=X+Visual * Rand()
$$

$$
X_{next}=X+\frac{X_{v}-X}{\|X_{v}-X\|}*Step*Rand()
$$

​	说明：Rand()为0到1之间的随机数，Step为步长

（2）人工鱼群算法中的相关变量说明及函数封装

* 变量说明：

  * 人工鱼的总数N：数目越多跳出局部最优解的能力越强，同时收敛速度越快，但计算量会增加

  * 人工鱼个体的状态X=(x<sub>1</sub>,x<sub>2</sub>,...,x<sub>n</sub>)，其中x<sub>i</sub>(i=1,2,...,n)为寻优的变量；

  * 人工鱼移动的最大步长Step：步长过大时会出现震荡现象影响收敛速度，需选择合适步长

  * 人工鱼的视野Visual：视野越大，越容易发现全局最优解并收敛。视野越小，觅食行为和随机行为突出

  * 尝试次数Try−number：尝试次数越多，觅食行为能力越强，收敛效率越高，但容易陷入局部最优

  * 拥挤度因子δ（下面n<sub>max</sub>为期望在该邻域内聚集的最大人工鱼数目）

    δ越大，允许的拥挤程度越小，人工鱼摆脱局部最优解的能力越强，但是收敛速度会有所减缓，这主要因为人工鱼在逼近最优解的同时，会因避免过分拥挤而随机走开或者受其他人工鱼的排斥作用，不能精确逼近极值点。

    * 极大值问题中：δ=1/(α*n<sub>max</sub>), α∈(0,1] ;
    * 极小值问题中，δ=α*n<sub>max</sub>, α∈(0,1]

  * 人工鱼个体i,j之间的距离dij=|x<sub>i</sub>−x<sub>j</sub>|

* 函数说明：

  * 人工鱼当前所在位置食物浓度表示为Y=f(x)（Y为目标函数值）；
  * 觅食行为Prey()；
  * 聚群行为Swarm()；
  * 追尾行为Follow()；
  * 随机行为Move();
  * 评价函数Evaluate()

####3.鱼群的四种行为定义

（1）觅食行为Prey()

​		在大自然环境中，鱼群一般是通过视觉或味觉来感知水中的食物量或食物浓度来选择行动的方向。而人工鱼群则根据当前状态与其感知范围内随机的另一个状态进行比较，若相应状态的目标函数大于当前的状态的目标函数，则向新选择得到的状态靠近一步，反之重新选取新状态，判断是否满足条件，选择次数达到规定的数量后，若仍然不满足条件，则随机移动一步。

​		人工鱼X<sub>i</sub>在其视野内随机选择一个状态X<sub>j</sub>:
$$
X_{j}=X_{i}+Visual * Rand()
$$
​		计算X<sub>i</sub>与X<sub>j</sub>的目标函数Y<sub>i</sub>与Y<sub>j</sub>,如果发现更优，则向该方向移动一步,否则X<sub>i</sub>继续在其视野内随机选择状态X<sub>j</sub>，判断是否满足前进条件，反复尝试Tray−number次后，仍没有满足前进条件，则执行随机行为。
$$
X_{i}^{t+1}=X_{i}^{t}+\frac{X_{j}-X_{i}^{t}}{\|X_{j}-X_{i}^{t}\|}*Step*Rand()
$$
（2）聚群行为Swarm()

​		鱼的聚群行为大多是为了进行集体觅食或躲避敌害。人工鱼会获取当前邻居群内的伙伴数量，并计算伙伴的中心位置，随后把该中心位置的目标函数与当前位置的目标函数相比较，若中心位置的目标函数优于当前位置的目标函数，并且不是很拥挤（拥挤度因子δ），则当前位置向中心位置移动一步，否则执行觅食行为。综合以上描述，鱼群聚集时的两条规律：尽量向邻近伙伴的中心移动，同时避免过分拥挤。

​		人工鱼X<sub>i</sub>搜索当前视野内（d<sub>ij</sub><Vaisual）的伙伴数目n<sub>f</sub>和中心位置X<sub>c</sub>，若Y<sub>c</sub>/n<sub>f</sub> > δY<sub>i</sub>，则表明伙伴中心位置状态较优且不太拥挤，则X<sub>i</sub>朝伙伴的中心位置移动一步,否则进行觅食行为：
$$
X_{i}^{t+1}=X_{i}^{t}+\frac{X_{c}-X_{i}^{t}}{\|X_{c}-X_{i}^{t}\|}*Step*Rand()
$$
（3）追尾行为Follow()

​		当某一条鱼或几条鱼发现食物时，附近的鱼群会尾随而来，导致更远处的鱼也会尾随过来。人工鱼探索周围邻居鱼的最优位置，当最优位置的目标函数值大于当前位置的目标函数值并且不是很拥挤，则当前位置向最优邻居鱼移动一步，否则执行觅食行为。 

​		人工鱼X<sub>i</sub>搜索当前视野内（d<sub>ij</sub><Vaisual）的伙伴中函数Y<sub>j</sub>最优伙伴X<sub>j</sub>，如果Y<sub>j</sub>/n<sub>f</sub> > δY<sub>i</sub>，表明最优伙伴的周围不太拥挤，则X<sub>i</sub>朝词伙伴移动一步,否则进行觅食行为：
$$
X_{i}^{t+1}=X_{i}^{t}+\frac{X_{j}-X_{i}^{t}}{\|X_{j}-X_{i}^{t}\|}*Step*Rand()
$$
（4）随机行为Move()

​		觅食行为的一个缺省行为，指人工鱼在视野内随机移动。当发现食物时，会向食物逐渐增多的方向快速的移动。 
$$
X_{i}^{t+1}=X_{i}^t+Visual * Rand()
$$

####4.人工鱼群算法描述

（1）行为评价

​		用来反映鱼自主行为的一种方式，在解决优化问题时选用两种方式评价：一种是选择**最优行为**执行；另一种是选择**较优方向**。对于解决极大值问题，可以使用试探法，即模拟执行群聚、追尾等行为，然后评价行动后的值选择最优的来执行，缺省的行为为觅食行为。

（2）评价标准

* 判断方法
  * 通常判断连续多次所得值得**均方差**小于允许的**误差**；
  * 判断聚集于某个区域的人工鱼的**数目达到某个比例**；
  * **连续多次所得的均值不超过已寻找的极值**；
  * 限制**最大迭代次数**

* 状态更新
  * 利用**公告牌**记录最优人工鱼个体的状态；
  * 每条人工鱼在完一次迭代后将当前状态与公告牌中记录的状态进行比较；
  * 若优于公告牌中的状态则用自身状态更新公告牌中的状态，反之不变；
  * 当整个算法的迭代结束后，公告牌的值就是最优解

（3）算法步骤

​		step 1. 初始化设置，包括种群规模N、每条人工鱼的初始位置、人工鱼的视野Visual、步长step、拥挤度因子δ、重复次数Try−number；

​		step 2. 计算初始鱼群各个体的适应值，取最优人工鱼状态及其值赋予给公告牌；

​		step 3. 对每个个体进行评价，对其要执行的行为进行选择，包括觅食、聚群、追尾和随机行为；

​		step 4. 执行人工鱼的行为，更新自己，生成新鱼群；

​		step 5.评价所有个体。若某个体优于公告牌，则将公告牌更新为该个体；

​		step 6.当公告牌上最优解达到满意误差界内或者达到迭代次数上限时算法结束，否则转步骤3。

#### 5.算法优缺点

（1）优点

​	    比较目标函数值，对目标函数的性质要求不高；

​		对初值的要求不高，随机产生或设置为固定值均可，鲁棒性强；

​		对参数设定的要求不高，容许范围大；

​		具备并行处理能力；

​		具备较好的全局寻优能力，能快速跳出局部最优点；

​		对于一些精度要求不高的场合，可以用它快速得到一个可行解；

​		不需要问题的严格机理模型，甚至不需要问题的精确描述，应用范围广泛

（2）缺点

​		收敛速度较慢；

​			